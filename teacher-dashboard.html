<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Academic Performance System</title>
    <link rel="stylesheet" href="styles/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dashboard-body">
    <div class="dashboard-container">
        <sidebar class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-graduation-cap"></i>
                    <span>EduAnalytics</span>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" onclick="showSection('overview')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Overview</span>
                </a>
                <a href="#students" class="nav-item" onclick="showSection('students')">
                    <i class="fas fa-users"></i>
                    <span>Students</span>
                </a>
                <a href="#grades" class="nav-item" onclick="showSection('grades')">
                    <i class="fas fa-chart-line"></i>
                    <span>Grade Entry</span>
                </a>
                <a href="#attendance" class="nav-item" onclick="showSection('attendance')">
                    <i class="fas fa-calendar-check"></i>
                    <span>Attendance</span>
                </a>
                <a href="#analytics" class="nav-item" onclick="showSection('analytics')">
                    <i class="fas fa-chart-pie"></i>
                    <span>Analytics</span>
                </a>
                <a href="#interventions" class="nav-item" onclick="showSection('interventions')">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Interventions</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="teacherName">Teacher Name</div>
                        <div class="user-role">Educator</div>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </sidebar>

        <main class="main-content">
            <header class="dashboard-header">
                <div class="header-title">
                    <h1 id="sectionTitle">Dashboard Overview</h1>
                    <p id="sectionSubtitle">Welcome back! Here's what's happening in your classes.</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="exportData()">
                        <i class="fas fa-download"></i>
                        Export Data
                    </button>
                    <button class="btn btn-primary" onclick="openQuickGradeModal()">
                        <i class="fas fa-plus"></i>
                        Quick Grade
                    </button>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="overview" class="dashboard-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalStudents">0</div>
                            <div class="stat-label">Total Students</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="averageGrade">0</div>
                            <div class="stat-label">Average Grade</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="attendanceRate">0%</div>
                            <div class="stat-label">Attendance Rate</div>
                        </div>
                    </div>
                    <div class="stat-card alert">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="atRiskStudents">0</div>
                            <div class="stat-label">At-Risk Students</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Class Performance Overview</h3>
                            <select id="classSelect" onchange="updateOverview()">
                                <option value="all">All Classes</option>
                                <option value="math101">Math 101</option>
                                <option value="science102">Science 102</option>
                                <option value="english103">English 103</option>
                            </select>
                        </div>
                        <div class="card-content">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Recent Activity</h3>
                        </div>
                        <div class="card-content">
                            <div class="activity-list" id="recentActivity">
                                <!-- Activity items will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dashboard-card">
                    <div class="card-header">
                        <h3>At-Risk Students Alert</h3>
                    </div>
                    <div class="card-content">
                        <div class="alert-list" id="atRiskList">
                            <!-- At-risk students will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Students Section -->
            <section id="students" class="dashboard-section">
                <div class="section-toolbar">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search students..." id="studentSearch" oninput="filterStudents()">
                    </div>
                    <div class="filter-options">
                        <select id="classFilter" onchange="filterStudents()">
                            <option value="all">All Classes</option>
                            <option value="math101">Math 101</option>
                            <option value="science102">Science 102</option>
                            <option value="english103">English 103</option>
                        </select>
                        <select id="performanceFilter" onchange="filterStudents()">
                            <option value="all">All Performance</option>
                            <option value="excellent">Excellent (A)</option>
                            <option value="good">Good (B)</option>
                            <option value="average">Average (C)</option>
                            <option value="poor">Poor (D-F)</option>
                        </select>
                    </div>
                </div>

                <div class="students-grid" id="studentsGrid">
                    <!-- Student cards will be populated by JavaScript -->
                </div>
            </section>

            <!-- Grade Entry Section -->
            <section id="grades" class="dashboard-section">
                <div class="grade-entry-container">
                    <div class="grade-entry-header">
                        <h3>Grade Entry</h3>
                        <div class="grade-actions">
                            <select id="gradeClassSelect" onchange="loadStudentsForGrading()">
                                <option value="">Select Class</option>
                                <option value="math101">Math 101</option>
                                <option value="science102">Science 102</option>
                                <option value="english103">English 103</option>
                            </select>
                            <select id="assignmentSelect" onchange="loadStudentsForGrading()">
                                <option value="">Select Assignment</option>
                                <option value="quiz1">Quiz 1</option>
                                <option value="midterm">Midterm Exam</option>
                                <option value="project1">Project 1</option>
                                <option value="final">Final Exam</option>
                            </select>
                        </div>
                    </div>

                    <div class="grade-entry-table">
                        <table id="gradeTable">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Student ID</th>
                                    <th>Current Grade</th>
                                    <th>New Grade</th>
                                    <th>Comments</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="gradeTableBody">
                                <!-- Grade entries will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="grade-entry-actions">
                        <button class="btn btn-secondary" onclick="saveAllGrades()">
                            <i class="fas fa-save"></i>
                            Save All Grades
                        </button>
                        <button class="btn btn-primary" onclick="submitGrades()">
                            <i class="fas fa-check"></i>
                            Submit Grades
                        </button>
                    </div>
                </div>
            </section>

            <!-- Attendance Section -->
            <section id="attendance" class="dashboard-section">
                <div class="attendance-container">
                    <div class="attendance-header">
                        <h3>Attendance Management</h3>
                        <div class="attendance-controls">
                            <input type="date" id="attendanceDate" onchange="loadAttendance()">
                            <select id="attendanceClass" onchange="loadAttendance()">
                                <option value="">Select Class</option>
                                <option value="math101">Math 101</option>
                                <option value="science102">Science 102</option>
                                <option value="english103">English 103</option>
                            </select>
                        </div>
                    </div>

                    <div class="attendance-table">
                        <table id="attendanceTableMain">
                            <thead>
                                <tr>
                                    <th>Student</th>
                                    <th>Student ID</th>
                                    <th>Status</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody id="attendanceTableBody">
                                <!-- Attendance entries will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="attendance-actions">
                        <button class="btn btn-secondary" onclick="markAllPresent()">
                            <i class="fas fa-check-circle"></i>
                            Mark All Present
                        </button>
                        <button class="btn btn-primary" onclick="saveAttendance()">
                            <i class="fas fa-save"></i>
                            Save Attendance
                        </button>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="dashboard-section">
                <div class="analytics-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Grade Distribution</h3>
                        </div>
                        <div class="card-content">
                            <canvas id="gradeDistributionChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Attendance Trends</h3>
                        </div>
                        <div class="card-content">
                            <canvas id="attendanceTrendChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Performance Comparison</h3>
                        </div>
                        <div class="card-content">
                            <canvas id="performanceComparisonChart"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Student Progress</h3>
                        </div>
                        <div class="card-content">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Interventions Section -->
            <section id="interventions" class="dashboard-section">
                <div class="interventions-container">
                    <div class="interventions-header">
                        <h3>Student Interventions</h3>
                        <button class="btn btn-primary" onclick="generateInterventions()">
                            <i class="fas fa-magic"></i>
                            Generate Recommendations
                        </button>
                    </div>

                    <div class="interventions-list" id="interventionsList">
                        <!-- Interventions will be populated by JavaScript -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Quick Grade Modal -->
    <div id="quickGradeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Quick Grade Entry</h3>
                <button class="modal-close" onclick="closeQuickGradeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="quickGradeForm">
                    <div class="form-group">
                        <label for="quickStudent">Student</label>
                        <select id="quickStudent" required>
                            <option value="">Select Student</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quickAssignment">Assignment</label>
                        <select id="quickAssignment" required>
                            <option value="">Select Assignment</option>
                            <option value="quiz1">Quiz 1</option>
                            <option value="midterm">Midterm Exam</option>
                            <option value="project1">Project 1</option>
                            <option value="final">Final Exam</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quickGrade">Grade</label>
                        <input type="number" id="quickGrade" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="quickComments">Comments (Optional)</label>
                        <textarea id="quickComments" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeQuickGradeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitQuickGrade()">Save Grade</button>
            </div>
        </div>
    </div>

    <script type="module" src="scripts/data.js"></script>
    <script type="module" src="scripts/teacher-dashboard.js"></script>
</body>
</html>